(function(){function t(t){return t.charCodeAt(0)}function i(){return W.pop()||[]}function n(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}function e(t){t.length=0,W.length<I&&W.push(t)}function o(t,i,n){i||(i=0),"undefined"==typeof n&&(n=t?t.length:0);for(var e=-1,o=n-i||0,r=Array(0>o?0:o);++e<o;)r[e]=t[i+e];return r}function r(){}function s(t){function i(){if(e){var t=o(e);gi.apply(t,arguments)}if(this instanceof i){var s=a(n.prototype),l=n.apply(s,t||arguments);return m(l)?l:s}return n.apply(r,t||arguments)}var n=t[0],e=t[2],r=t[4];return Ai(i,t),i}function a(t){return m(t)?mi(t):{}}function l(t,i,n){if("function"!=typeof t)return O;if("undefined"==typeof i||!("prototype"in t))return t;var e=t.__bindData__;if("undefined"==typeof e&&(wi.funcNames&&(e=!t.name),e=e||!wi.funcDecomp,!e)){var o=ci.call(t);wi.funcNames||(e=!M.test(o)),e||(e=N.test(o),Ai(t,e))}if(e===!1||e!==!0&&1&e[1])return t;switch(n){case 1:return function(n){return t.call(i,n)};case 2:return function(n,e){return t.call(i,n,e)};case 3:return function(n,e,o){return t.call(i,n,e,o)};case 4:return function(n,e,o,r){return t.call(i,n,e,o,r)}}return j(t,i)}function h(t){function i(){var t=c?l:this;if(r){var x=o(r);gi.apply(x,arguments)}if((s||f)&&(x||(x=o(arguments)),s&&gi.apply(x,s),f&&x.length<p))return e|=16,h([n,g?e:-4&e,x,null,l,p]);if(x||(x=arguments),u&&(n=t[d]),this instanceof i){t=a(n.prototype);var y=n.apply(t,x);return m(y)?y:t}return n.apply(t,x)}var n=t[0],e=t[1],r=t[2],s=t[3],l=t[4],p=t[5],c=1&e,u=2&e,f=4&e,g=8&e,d=n;return Ai(i,t),i}function p(t,o,r,s,a,l){if(r){var h=r(t,o);if("undefined"!=typeof h)return!!h}if(t===o)return 0!==t||1/t==1/o;var c=typeof t,u=typeof o;if(!(t!==t||t&&ti[c]||o&&ti[u]))return!1;if(null==t||null==o)return t===o;var f=hi.call(t),g=hi.call(o);if(f==H&&(f=Q),g==H&&(g=Q),f!=g)return!1;switch(f){case G:case $:return+t==+o;case K:return t!=+t?o!=+o:0==t?1/t==1/o:t==+o;case U:case X:return t==String(o)}var d=f==q;if(!d){var m=fi.call(t,"__wrapped__"),b=fi.call(o,"__wrapped__");if(m||b)return p(m?t.__wrapped__:t,b?o.__wrapped__:o,r,s,a,l);if(f!=Q||!wi.nodeClass&&(n(t)||n(o)))return!1;var v=!wi.argsObject&&x(t)?Object:t.constructor,_=!wi.argsObject&&x(o)?Object:o.constructor;if(v!=_&&!(y(v)&&v instanceof v&&y(_)&&_ instanceof _)&&"constructor"in t&&"constructor"in o)return!1}var w=!a;a||(a=i()),l||(l=i());for(var k=a.length;k--;)if(a[k]==t)return l[k]==o;var A=0;if(h=!0,a.push(t),l.push(o),d){if(k=t.length,A=o.length,h=A==k,h||s)for(;A--;){var P=k,T=o[A];if(s)for(;P--&&!(h=p(t[P],T,r,s,a,l)););else if(!(h=p(t[A],T,r,s,a,l)))break}}else Ci(o,function(i,n,e){return fi.call(e,n)?(A++,h=fi.call(t,n)&&p(t[n],i,r,s,a,l)):void 0}),h&&!s&&Ci(t,function(t,i,n){return fi.call(n,i)?h=--A>-1:void 0});return a.pop(),l.pop(),w&&(e(a),e(l)),h}function c(t,i,n,e,o){(Pi(i)?A:Bi)(i,function(i,r){var s,a,l=i,h=t[r];if(i&&((a=Pi(i))||Ei(i))){for(var p=e.length;p--;)if(s=e[p]==i){h=o[p];break}if(!s){var u;n&&(l=n(h,i),(u="undefined"!=typeof l)&&(h=l)),u||(h=a?Pi(h)?h:[]:Ei(h)?h:{}),e.push(i),o.push(h),u||c(h,i,n,e,o)}}else n&&(l=n(h,i),"undefined"==typeof l&&(l=i)),"undefined"!=typeof l&&(h=l);t[r]=h})}function u(t,i,n,e,r,a){var l=1&i,p=2&i,c=4&i,f=16&i,g=32&i;if(!p&&!y(t))throw new TypeError;f&&!n.length&&(i&=-17,f=n=!1),g&&!e.length&&(i&=-33,g=e=!1);var d=t&&t.__bindData__;if(d&&d!==!0)return d=o(d),d[2]&&(d[2]=o(d[2])),d[3]&&(d[3]=o(d[3])),!l||1&d[1]||(d[4]=r),!l&&1&d[1]&&(i|=8),!c||4&d[1]||(d[5]=a),f&&gi.apply(d[2]||(d[2]=[]),n),g&&xi.apply(d[3]||(d[3]=[]),e),d[1]|=i,u.apply(null,d);var x=1==i||17===i?s:h;return x([t,i,n,e,r,a])}function f(){Z.shadowedProps=D,Z.array=Z.bottom=Z.loop=Z.top="",Z.init="iterable",Z.useHas=!0;for(var t,i=0;t=arguments[i];i++)for(var n in t)Z[n]=t[n];var e=Z.args;Z.firstArg=/^[^,]+/.exec(e)[0];var o=Function("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+e+") {\n"+ki(Z)+"\n}");return o(l,J,si,fi,F,x,Pi,b,Z.keys,ai,ti,_i,X,li,hi)}function g(t){return"function"==typeof t&&pi.test(t)}function d(t){var i,e;return!t||hi.call(t)!=Q||(i=t.constructor,y(i)&&!(i instanceof i))||!wi.argsClass&&x(t)||!wi.nodeClass&&n(t)?!1:wi.ownLast?(Ci(t,function(t,i,n){return e=fi.call(n,i),!1}),e!==!1):(Ci(t,function(t,i){e=i}),"undefined"==typeof e||fi.call(t,e))}function x(t){return t&&"object"==typeof t&&"number"==typeof t.length&&hi.call(t)==H||!1}function y(t){return"function"==typeof t}function m(t){return!(!t||!ti[typeof t])}function b(t){return"string"==typeof t||t&&"object"==typeof t&&hi.call(t)==X||!1}function v(t){var n=arguments,r=2;if(!m(t))return t;if("number"!=typeof n[2]&&(r=n.length),r>3&&"function"==typeof n[r-2])var s=l(n[--r-1],n[r--],2);else r>2&&"function"==typeof n[r-1]&&(s=n[--r]);for(var a=o(arguments,1,r),h=-1,p=i(),u=i();++h<r;)c(t,a[h],s,p,u);return e(p),e(u),t}function w(t,i,n){var e=[];if(i=r.createCallback(i,n,3),Pi(t))for(var o=-1,s=t.length;++o<s;){var a=t[o];i(a,o,t)&&e.push(a)}else Oi(t,function(t,n,o){i(t,n,o)&&e.push(t)});return e}function A(t,i,n){if(i&&"undefined"==typeof n&&Pi(t))for(var e=-1,o=t.length;++e<o&&i(t[e],e,t)!==!1;);else Oi(t,i,n);return t}function P(i,n,e){var o=-1/0,s=o;if("function"!=typeof n&&e&&e[n]===i&&(n=null),null==n&&Pi(i))for(var a=-1,l=i.length;++a<l;){var h=i[a];h>s&&(s=h)}else n=null==n&&b(i)?t:r.createCallback(n,e,3),Oi(i,function(t,i,e){var r=n(t,i,e);r>o&&(o=r,s=t)});return s}function T(i,n,e){var o=1/0,s=o;if("function"!=typeof n&&e&&e[n]===i&&(n=null),null==n&&Pi(i))for(var a=-1,l=i.length;++a<l;){var h=i[a];s>h&&(s=h)}else n=null==n&&b(i)?t:r.createCallback(n,e,3),Oi(i,function(t,i,e){var r=n(t,i,e);o>r&&(o=r,s=t)});return s}function S(t){var i=t?t.length:0;return"number"==typeof i?i:Si(t).length}function j(t,i){return arguments.length>2?u(t,17,o(arguments,2),null,i):u(t,1,null,null,i)}function L(t,i,n){var e=typeof t;if(null==t||"function"==e)return l(t,i,n);if("object"!=e)return B(t);var o=Si(t),r=o[0],s=t[r];return 1!=o.length||s!==s||m(s)?function(i){for(var n=o.length,e=!1;n--&&(e=p(i[o[n]],t[o[n]],null,!0)););return e}:function(t){var i=t[r];return s===i&&(0!==s||1/s==1/i)}}function O(t){return t}function C(){}function B(t){return function(i){return i[t]}}var E,z,R;R=function(t){var i,n,e,o;for(i=1/0,e=0,o=t.length;o>e;e++)n=t[e],null!=n&&i>n&&(i=n);return 1/0===i?null:i},z=function(t){var i,n,e,o;for(i=-1/0,e=0,o=t.length;o>e;e++)n=t[e],null!=n&&n>i&&(i=n);return i===-1/0?null:i},Number.prototype.format=E=function(t,i,n){var e,o,r,s,a;return null==i&&(i="."),null==n&&(n=","),o=(this+"").replace(/[^0-9+\-Ee.]/g,""),"-99999.99"===o||null==o?"-":(e=isFinite(+o)?+o:0,r=isFinite(+t)?Math.abs(t):0,o>1e9?(o/1e9).format(t)+"B":o>1e6?(o/1e6).format(t)+"M":(a=function(t,i){var n;return n=Math.pow(10,i),""+Math.round(t*n)/n},s=(r?a(e,r):""+Math.round(e)).split("."),s[0].length>3&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,n)),(s[1]||"").length<r&&(s[1]=s[1]||"",s[1]+=new Array(r-s[1].length+1).join("0")),s.join(i)))};var W=[],F={},I=40,M=/^\s*function[ \n\r\t]+\w/,N=/\bthis\b/,D=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],H="[object Arguments]",q="[object Array]",G="[object Boolean]",$="[object Date]",J="[object Error]",V="[object Function]",K="[object Number]",Q="[object Object]",U="[object RegExp]",X="[object String]",Y={configurable:!1,enumerable:!1,value:null,writable:!1},Z={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},ti={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},ii=ti[typeof window]&&window||this,ni=ti[typeof exports]&&exports&&!exports.nodeType&&exports,ei=ti[typeof module]&&module&&!module.nodeType&&module,oi=(ei&&ei.exports===ni&&ni,ti[typeof global]&&global);!oi||oi.global!==oi&&oi.window!==oi||(ii=oi);var ri=[],si=Error.prototype,ai=Object.prototype,li=String.prototype,hi=ai.toString,pi=RegExp("^"+String(hi).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),ci=Function.prototype.toString,ui=g(ui=Object.getPrototypeOf)&&ui,fi=ai.hasOwnProperty,gi=ri.push,di=ai.propertyIsEnumerable,xi=ri.unshift,yi=function(){try{var t={},i=g(i=Object.defineProperty)&&i,n=i(t,t,t)&&i}catch(e){}return n}(),mi=g(mi=Object.create)&&mi,bi=g(bi=Array.isArray)&&bi,vi=g(vi=Object.keys)&&vi,_i={};_i[q]=_i[$]=_i[K]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},_i[G]=_i[X]={constructor:!0,toString:!0,valueOf:!0},_i[J]=_i[V]=_i[U]={constructor:!0,toString:!0},_i[Q]={constructor:!0},function(){for(var t=D.length;t--;){var i=D[t];for(var n in _i)fi.call(_i,n)&&!fi.call(_i[n],i)&&(_i[n][i]=!1)}}();var wi=r.support={};!function(){var t=function(){this.x=1},i={0:1,length:1},n=[];t.prototype={valueOf:1,y:1};for(var e in new t)n.push(e);for(e in arguments);wi.argsClass=hi.call(arguments)==H,wi.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),wi.enumErrorProps=di.call(si,"message")||di.call(si,"name"),wi.enumPrototypes=di.call(t,"prototype"),wi.funcDecomp=!g(ii.WinRTError)&&N.test(function(){return this}),wi.funcNames="string"==typeof Function.name,wi.nonEnumArgs=0!=e,wi.nonEnumShadows=!/valueOf/.test(n),wi.ownLast="x"!=n[0],wi.spliceObjects=(ri.splice.call(i,0,1),!i[0]),wi.unindexedChars="x"[0]+Object("x")[0]!="xx";try{wi.nodeClass=!(hi.call(document)==Q&&!({toString:0}+""))}catch(o){wi.nodeClass=!0}}(1);var ki=function(t){var i="var index, iterable = "+t.firstArg+", result = "+t.init+";\nif (!iterable) return result;\n"+t.top+";";t.array?(i+="\nvar length = iterable.length; index = -1;\nif ("+t.array+") {  ",wi.unindexedChars&&(i+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),i+="\n  while (++index < length) {\n    "+t.loop+";\n  }\n}\nelse {  "):wi.nonEnumArgs&&(i+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+t.loop+";\n    }\n  } else {  "),wi.enumPrototypes&&(i+="\n  var skipProto = typeof iterable == 'function';\n  "),wi.enumErrorProps&&(i+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var n=[];if(wi.enumPrototypes&&n.push('!(skipProto && index == "prototype")'),wi.enumErrorProps&&n.push('!(skipErrorProps && (index == "message" || index == "name"))'),t.useHas&&t.keys)i+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",n.length&&(i+="    if ("+n.join(" && ")+") {\n  "),i+=t.loop+";    ",n.length&&(i+="\n    }"),i+="\n  }  ";else if(i+="\n  for (index in iterable) {\n",t.useHas&&n.push("hasOwnProperty.call(iterable, index)"),n.length&&(i+="    if ("+n.join(" && ")+") {\n  "),i+=t.loop+";    ",n.length&&(i+="\n    }"),i+="\n  }    ",wi.nonEnumShadows){for(i+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;7>k;k++)i+="\n    index = '"+t.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",t.useHas||(i+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),i+=") {\n      "+t.loop+";\n    }      ";i+="\n  }    "}return(t.array||wi.nonEnumArgs)&&(i+="\n}"),i+=t.bottom+";\nreturn result"};mi||(a=function(){function t(){}return function(i){if(m(i)){t.prototype=i;var n=new t;t.prototype=null}return n||ii.Object()}}());var Ai=yi?function(t,i){Y.value=i,yi(t,"__bindData__",Y)}:C;wi.argsClass||(x=function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&fi.call(t,"callee")&&!di.call(t,"callee")||!1});var Pi=bi||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&hi.call(t)==q||!1},Ti=f({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),Si=vi?function(t){return m(t)?wi.enumPrototypes&&"function"==typeof t||wi.nonEnumArgs&&t.length&&x(t)?Ti(t):vi(t):[]}:Ti,ji={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:Si,loop:"if (callback(iterable[index], index, collection) === false) return result"},Li={top:"if (!objectTypes[typeof iterable]) return result;\n"+ji.top,array:!1},Oi=f(ji),Ci=f(ji,Li,{useHas:!1}),Bi=f(ji,Li);y(/x/)&&(y=function(t){return"function"==typeof t&&hi.call(t)==V});var Ei=ui?function(t){if(!t||hi.call(t)!=Q||!wi.argsClass&&x(t))return!1;var i=t.valueOf,n=g(i)&&(n=ui(i))&&ui(n);return n?t==n||ui(t)==n:d(t)}:d;r.bind=j,r.createCallback=L,r.filter=w,r.forEach=A,r.forIn=Ci,r.forOwn=Bi,r.keys=Si,r.max=P,r.merge=v,r.min=T,r.property=B,r.each=A,r.select=w,r.identity=O,r.isArguments=x,r.isArray=Pi,r.isFunction=y,r.isObject=m,r.isPlainObject=Ei,r.isString=b,r.noop=C,r.size=S,r.VERSION="2.4.1",ii._=r;var zi;zi=function(){function t(t,i,n,e){this.canvas=t,this.data=i,this.options=null!=n?n:null,this.ipo=e,null==this.options&&(this.options={}),this.options=_.merge({chart:{width:1060,height:480,paddingLeft:5,paddingTop:5,paddingRight:5,paddingBottom:5,lineWidth:2,font:{style:"normal",weight:"normal",size:"13px",family:"Arial"},color:"#888",background:"#ffffff"},graph:{border:!0,marginLeft:"auto",marginBottom:30,marginTop:5,marginRight:20,background:"#ffffff",background_stripe:"#FCFCFC"},legend:{font:{style:"italic",size:"13px"},color:"rgba(0,0,0,0.3)",enable:!0,layout:"horizontal",marginTop:35,marginBottom:0},xAxis:{data:[],title:"",grid:{enable:!0,align:"margin"},tick:{enable:!0,align:"margin",size:10},label:{enable:!0,align:"margin",font:{},color:"#000"},min:null,max:null,breaks:5},yAxis:{data:[],title:"",grid:{enable:!1,align:"margin"},tick:{enable:!0,size:10},label:{enable:!0,align:"left",font:{},color:"#000"},min:null,max:null,breaks:5}},this.options),this.ctx=this.canvas.getContext("2d"),this.options.debug===!0&&this.rect(this.ctx,0,0,this.ctx.canvas.width,this.ctx.canvas.height,0),this.device_ratio=window?this.scaleRatio(this.canvas):1,this.preprocess_style(),this.preprocess_data(),this.drawGraph()}return t.prototype.canvas=null,t.prototype.ctw=null,t.prototype.position={},t.prototype.scaleRatio=function(t){var i,n,e,o,r,s;return n=t.getContext("2d"),e=window.devicePixelRatio||1,i=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1,s=e/i,e!==i&&(r=t.width,o=t.height,t.width=r*s,t.height=o*s,t.style.width=r+"px",t.style.height=o+"px",n.scale(s,s)),s},t.prototype.preprocess_data=function(){var t,i,n,e,o,r,s,a,l,h,p,c,u,f;for(null!=this.options.yAxis.min&&(this.min_data=this.options.yAxis.min),null!=this.options.yAxis.max&&(this.max_data=this.options.yAxis.max),(null==this.options.yAxis.min||null==this.options.yAxis.max)&&(a=_.min(this.data,function(t){return R(t.data)}),s=_.min(a.data),o=_.max(this.data,function(t){return z(t.data)}),e=_.max(o.data),l=.1*(e-s),0===l&&(l=this.options.yAxis.breaks),l=0,null==this.options.yAxis.max&&(this.max_data=e+l),null==this.options.yAxis.min&&(this.min_data=s)),"auto"===this.options.graph.marginLeft&&(r=this.auto_format(this.max_data),i=r.length,this.options.graph.marginLeft=10+8*i+this.options.yAxis.tick.size),this.graph_width=this.options.chart.width-this.options.chart.paddingLeft-this.options.chart.paddingRight,this.graph_height=this.options.chart.height-this.options.chart.paddingTop-this.options.chart.paddingBottom,this.interval=this.max_data-this.min_data,this.inner_width=this.graph_width-(this.options.graph.marginLeft+this.options.graph.marginRight),this.inner_height=this.graph_height-(this.options.graph.marginTop+this.options.graph.marginBottom),this.pl=this.options.chart.paddingLeft,this.pt=this.options.chart.paddingTop,u=this.data,f=[],p=0,c=u.length;c>p;p++)n=u[p],t=this.inner_width/(_.size(n.data)-1),n.plot=[],f.push(function(){var i,e,o,r;for(o=n.data,r=[],i=0,e=o.length;e>i;i++)h=o[i],r.push(null!=h?n.plot.push({x:this.pl+i*t+this.options.graph.marginLeft,y:this.pt+this.inner_height-(h-this.min_data)/this.interval*this.inner_height+this.options.graph.marginTop}):n.plot.push(null));return r}.call(this));return f},t.prototype.preprocess_style=function(){var t;return this.ctx.font=this.font_format(this.options.chart.font),this.options.legend.enable?(t=2*parseInt(this.options.legend.font.size.replace("px",""))+this.options.legend.marginTop+this.options.legend.marginBottom,this.options.chart.paddingBottom+=t):void 0},t.prototype.drawGraph=function(){var t,i,n,e;for(this.ctx.strokeStyle=this.options.chart.color,this.options.graph.border&&(this.ctx.lineWidth=this.options.chart.lineWidth,this.ctx.moveTo(this.pl+this.options.graph.marginLeft,this.pt),this.ctx.lineTo(this.pl+this.options.graph.marginLeft,this.pt+this.graph_height-this.options.graph.marginBottom),this.ctx.lineTo(this.pl+this.graph_width,this.pt+this.graph_height-this.options.graph.marginBottom),this.ctx.stroke()),this.horizontal_line(),this.vertical_line(),e=this.data,i=0,n=e.length;n>i;i++)t=e[i],this.addLine(t);return null!=this.ipo&&this.addFlag(this.ipo,"IPO\nDATE"),this.options.legend.enable?this.process_legend():void 0},t.prototype.addLine=function(t){switch(t.type){case"line":return this.draw_line_graph(t);case"column":return this.draw_column_graph(t)}},t.prototype.draw_column_graph=function(t){var i,n,e,o,r,s,a,l,h;for(i=this.inner_width/_.size(t.data),n=i/2,this.ctx.textBaseline="bottom",l=t.data,h=[],s=0,a=l.length;a>s;s++)e=l[s],null!=e?(o=(s+1)*i+this.options.graph.marginLeft,("center"===this.options.xAxis.label.align||"center"===this.options.xAxis.tick.align)&&(o-=i/2),r=this.inner_height-(e-this.min_data)/this.interval*this.inner_height+this.options.graph.marginTop,this.ctx.fillStyle=t.style.color,this.ctx.fillRect(this.pl+o-n/2,this.pt+r,n,(e-this.min_data)/this.interval*this.inner_height-this.options.chart.lineWidth+1),t.caption?(this.ctx.fillStyle=this.options.chart.color,h.push(this.ctx.fillText(e.format(2),this.pl+o,this.pt+r))):h.push(void 0)):h.push(void 0);return h},t.prototype.draw_line_graph=function(t){var i,n,e,o,r,s,a;for(this.ctx.beginPath(),this.ctx.lineWidth=t.style.lineWidth||2,this.ctx.strokeStyle=t.style.color||"#000",this.ctx.fillStyle=t.style.color||"#000",e=0,i=t.plot[0],a=t.plot,r=0,s=a.length;s>r;r++)o=a[r],null!=o&&null!=i?(e=0,"dashed"===t.style.line&&0!==r?this.dashedLine(this.ctx,i.x,i.y,o.x,o.y):"point"===t.style.line?this.ctx.fillRect(o.x,o.y,3,3):this.ctx.lineTo(o.x,o.y),n=o):null!=o&&e>12?this.ctx.moveTo(o.x,o.y):null!=o&&null!=n&&12>e&&("dashed"===t.style.line?this.dashedLine(this.ctx,n.x,n.y,o.x,o.y):"point"===t.style.line?this.ctx.fillRect(o.x,o.y,1,1):this.ctx.lineTo(o.x,o.y)),null==o&&e++,i=o;return this.ctx.stroke(),this.ctx.closePath()},t.prototype.addFlag=function(t,i){var n,e,o,r,s,a,l,h,p,c,u,f;return r=this.graph_width-(this.options.graph.marginLeft+this.options.graph.marginRight),n=r/_.size(this.data[0].data),s=t*n+this.options.chart.paddingLeft+this.options.graph.marginLeft,a=this.graph_height-this.options.graph.marginBottom,this.ctx.lineWidth=1,this.ctx.strokeStyle=this.data[0].style.color,this.dashedLine(this.ctx,s,this.options.chart.paddingTop,s,this.options.chart.paddingTop+a),o=0,null!=(null!=(l=this.data[0])&&null!=(h=l.plot[t])?h.y:void 0)?(null!=(null!=(p=this.data[1])&&null!=(c=p.plot[t])?c.y:void 0)&&(e=Math.abs((this.data[1].plot[t].y-this.data[0].plot[t].y)/this.data[0].plot[t].y*100),15>e&&(o=(null!=(u=this.data[1].plot[t-1])?u.y:void 0)>(null!=(f=this.data[1])?f.plot[t].y:void 0)?-20:20)),(this.data[0].plot[t].y-this.pt)/this.inner_height*100>92&&(o-=15),(this.data[0].plot[t].y-this.pt)/this.inner_height*100<8&&(o+=15),this.options.chart.font.weight="normal",this.options.chart.font.size="13px",this.ctx.font=this.font_format(this.options.chart.font),this.ctx.fillStyle=this.data[0].style.color,this.ctx.textBaseline="bottom",this.ctx.textAlign="center",this.multiLine(this.ctx,i,s-3*n,this.data[0].plot[t].y+o)):void 0},t.prototype.addLabel=function(t,i){var n,e,o;switch(null==i&&(i={}),i=_.merge({font:{style:this.options.chart.font.style,weight:this.options.chart.font.weight,size:this.options.chart.font.size,family:this.options.chart.font.family},color:this.options.chart.color,background:null,textAlign:"left",textBaseline:"middle",verticalAlign:"middle",x:0,y:0,width:200,height:50},i),null!=i.background&&(this.ctx.fillStyle=i.background,this.ctx.fillRect(i.x,i.y,i.width,i.height)),n=this.font_format(i.font),this.ctx.font=n,this.ctx.fillStyle=i.color,this.ctx.textBaseline=i.textBaseline,this.ctx.textAlign=i.textAlign,i.textAlign){case"left":e=i.x;break;case"center":e=i.x+i.width/2;break;case"right":e=i.x}switch(i.verticalAlign){case"top":o=i.y;break;case"middle":o=i.y+i.height/2;break;case"bottom":o=i.y+i.height}return this.ctx.fillText(t,e,o)},t.prototype.shade=function(){var t,i,n,e,o,r,s,a,l,h,p,c,u,f,g,d,x,y,m,b,v,_;for(r=null,n="rgba(253, 115, 109, 0.4)",s="rgba(0, 183, 151, 0.4)",this.ctx.fillStyle=n,p=0,c=!1,_=[],l=x=0,b=this.data[0].plot.length;b>=0?b>=x:x>=b;l=b>=0?++x:--x)if(null!=this.data[0].plot[l]&&null!=this.data[1].plot[l]||c){if((null==this.data[0].plot[l]||null==this.data[1].plot[l])&&c){for(h=y=v=l-1;p>=v?p>=y:y>=p;h=p>=v?++y:--y)this.ctx.lineTo(this.data[1].plot[h].x,this.data[1].plot[h].y);this.ctx.closePath(),this.ctx.fillStyle=r?n:s,this.ctx.fill();break}if(null==this.data[0].plot[l]||null==this.data[1].plot[l]||c){if(i=this.data[0].plot[l].y<this.data[1].plot[l].y?!0:!1,a=null!=r&&r!==i?!0:!1){if(null!=this.data[0].plot[l-1]&&null!=this.data[1].plot[l-1]){for(g=this.data[0].plot[l-1].y,d=this.data[0].plot[l].y,t=g-R([g,d]),e=d-R([g,d]),o=this.data[0].plot[l].x-this.data[0].plot[l-1].x,u=this.data[0].plot[l-1].x+t*o/(t+e),f=R([g,d])+t*e/(t+e),this.ctx.lineTo(u,f),h=m=l;p>=l?p>=m:m>=p;h=p>=l?++m:--m)this.ctx.lineTo(this.data[1].plot[h].x,this.data[1].plot[h].y);this.ctx.closePath(),this.ctx.fillStyle=i?s:n,this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(this.data[0].plot[l-1].x,this.data[0].plot[l-1].y),this.ctx.lineTo(u,f),this.ctx.lineTo(this.data[0].plot[l].x,this.data[0].plot[l].y),p=l}}else this.ctx.lineTo(this.data[0].plot[l].x,this.data[0].plot[l].y);_.push(r=i)}else this.ctx.beginPath(),this.ctx.moveTo(this.data[0].plot[l].x,this.data[0].plot[l].y),_.push(c=!0)}else _.push(p=l+1);return _},t.prototype.multiLine=function(t,i,n,e){var o,r,s,a,l,h;for(s=i.split("\n"),o=this.options.chart.font.size.replace("px",""),h=[],a=0,l=s.length;l>a;a++)r=s[a],h.push(t.fillText(r,n,e+a*o));return h},t.prototype.horizontal_line=function(){var t,i,n,e,o,r,s,a,l;for(n=this.max_data-this.min_data,e=this.options.yAxis.breaks,this.ctx.beginPath(),t=this.graph_height-(this.options.graph.marginTop+this.options.graph.marginBottom),i=a=0,l=this.options.yAxis.breaks;l>=0?l>=a:a>=l;i=l>=0?++a:--a)r=this.min_data+n/e*i,s=t-t/e*i+this.options.graph.marginTop,this.options.graph.background_stripe&&i%2===0&&(this.ctx.fillStyle=this.options.graph.background_stripe,this.ctx.fillRect(this.pl+this.options.graph.marginLeft+this.options.chart.lineWidth,this.pt+s-t/e-this.options.chart.lineWidth-1,this.pl+this.graph_width,this.pt+t/e-this.options.chart.lineWidth-1)),this.options.yAxis.grid.enable&&(this.ctx.strokeStyle=this.options.chart.color,this.dashedLine(this.ctx,this.pl+this.options.graph.marginLeft,this.pt+s,this.pl+this.graph_width,this.pt+s,2)),this.options.yAxis.label.enable&&(this.ctx.fillStyle=this.options.yAxis.label.color||this.options.chart.label.color,this.ctx.font=this.font_format(this.options.yAxis.label.font),"left"===this.options.yAxis.label.align?(this.ctx.textAlign="right",this.ctx.textBaseline="middle",o=this.pl+this.options.graph.marginLeft-10,this.options.yAxis.tick.enable&&(o-=this.options.yAxis.tick.size)):(this.ctx.textAlign="left",this.ctx.textBaseline="bottom",o=this.pl+this.options.graph.marginLeft),this.ctx.fillText(this.auto_format(r),o,this.pt+s)),this.options.yAxis.tick.enable&&(this.ctx.beginPath(),this.ctx.strokeStyle=this.options.chart.color,this.ctx.moveTo(this.pl+this.options.graph.marginLeft-this.options.chart.lineWidth+1,this.pt+s),this.ctx.lineTo(this.pl+this.options.graph.marginLeft-this.options.chart.lineWidth-this.options.yAxis.tick.size+1,this.pt+s),this.ctx.stroke(),this.ctx.closePath());return this.ctx.stroke(),this.ctx.closePath()},t.prototype.vertical_line=function(){var t,i,n,e,o,r,s,a,l,h;if(n=this.graph_width-(this.options.graph.marginLeft+this.options.graph.marginRight),this.ctx.beginPath(),this.ctx.textAlign="center",this.ctx.fillStyle=this.options.xAxis.color||this.options.chart.color,this.ctx.strokeStyle=this.options.xAxis.color||this.options.chart.color,null!=this.options.xAxis.data&&this.options.xAxis.data.length>0)for(t=n/this.options.xAxis.data.length,a=this.options.xAxis.data,r=0,s=a.length;s>r;r++)i=a[r],e=(r+1)*t+this.options.graph.marginLeft,o=this.graph_height-this.options.graph.marginBottom,this.options.xAxis.label.enable&&(this.ctx.fillStyle=this.options.xAxis.label.color||this.options.chart.label.color,this.ctx.font=this.font_format(this.options.xAxis.label.font),l=e,"center"===this.options.xAxis.label.align&&(l=e-t/2),h=o+this.options.xAxis.tick.size,this.ctx.textBaseline="top",this.ctx.fillText(i,this.pl+l,this.pt+h)),this.options.xAxis.grid.enable&&(l="center"===this.options.xAxis.grid.align?e-t/2:e,this.ctx.lineWidth=.5,this.dashedLine(this.ctx,this.pl+l,this.pt,this.pl+l,this.pt+o,2)),this.options.xAxis.tick.enable&&(l="center"===this.options.xAxis.tick.align?e-t/2:e,this.ctx.beginPath(),this.ctx.lineWidth=this.options.chart.lineWidth,this.ctx.moveTo(this.pl+l,this.pt+o),this.ctx.lineTo(this.pl+l,this.pt+o+this.options.xAxis.tick.size),this.ctx.stroke());return this.ctx.closePath()},t.prototype.process_legend=function(){var t,i,n,e,o,r,s,a,l;for(n=150,e=2*parseInt(this.options.legend.font.size.replace("px","")),t=_.filter(this.data,function(t){return t.legend!==!1}),l=[],s=0,a=t.length;a>s;s++)i=t[s],o=this.options.chart.width/2+(s+1-(t.length+1)/2)*n,r=this.options.chart.height-this.options.chart.paddingBottom+this.options.legend.marginTop,this.ctx.fillStyle=this.options.legend.color||this.options.chart.color,this.ctx.font=this.font_format(this.options.legend.font),this.ctx.textAlign="center",this.ctx.textBaseline="top",this.ctx.fillText(i.name,o,r),this.ctx.strokeStyle=i.style.color,this.ctx.lineWidth=this.options.chart.lineWidth,"dashed"===i.style.line?l.push(this.dashedLine(this.ctx,o-n/2.5,r+e,o+n/2.5,r+e)):(this.ctx.beginPath(),this.ctx.moveTo(o-n/2.5,r+e),this.ctx.lineTo(o+n/2.5,r+e),l.push(this.ctx.stroke()));return l},t.prototype.httpOut=function(t){var i;return t.contentType("image/png"),i=this.canvas.createPNGStream(),i.on("data",function(i){return t.write(i)}),i.on("end",function(){return t.end()})},t.prototype.writeFile=function(){},t.prototype.dashedLine=function(t,i,n,e,o,r){var s,a,l,h,p,c;for(void 0===r&&(r=Math.floor(this.options.chart.width/250)),t.beginPath(),t.moveTo(i,n),s=e-i,a=o-n,p=Math.floor(Math.sqrt(s*s+a*a)/r),l=s/p,h=a/p,c=0;c++<p;)i+=l,n+=h,c%2===0?t.moveTo(i,n):t.lineTo(i,n);return c%2===0?t.moveTo(e,o):t.lineTo(e,o),t.stroke(),t.closePath()},t.prototype.rect=function(t,i,n,e,o,r,s,a){return null==r&&(r=0),void 0===a&&(a=!0),void 0===r&&(r=5),t.beginPath(),t.moveTo(i+r,n),t.lineTo(i+e-r,n),t.quadraticCurveTo(i+e,n,i+e,n+r),t.lineTo(i+e,n+o-r),t.quadraticCurveTo(i+e,n+o,i+e-r,n+o),t.lineTo(i+r,n+o),t.quadraticCurveTo(i,n+o,i,n+o-r),t.lineTo(i,n+r),t.quadraticCurveTo(i,n,i+r,n),t.closePath(),a&&t.stroke(),s?t.fill():void 0},t.prototype.auto_format=function(t,i){var n;return null!=i?t.format(i):(n=this.max_data-this.min_data,i=n>this.options.yAxis.breaks+2?0:n>1?1:2,t.format(i))},t.prototype.font_format=function(t){var i;return t=_.merge(this.options.chart.font,t),i=" ",t.weight+i+t.style+i+t.size+i+t.family},t}(),"undefined"!=typeof module&&module.exports?module.exports=zi:this.Jchart=zi}).call(this);